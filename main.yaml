modules:
- name: restapi
  with:
    port: 4000	
- name: rabbitmq
  with:
    uri: amqp://guest:guest@localhost:5672
    routing_key: test_key
    mode: producer
    declare: true

main: restapi

steps:
- id: producer
  module: rabbitmq
  input: main
- return:
    status_code: 201
    body:
      result: steps.producer
      mirror: main
    headers:
      Content-Type: '`application/json`'
